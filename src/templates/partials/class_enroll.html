{% from 'components/buttons.html' import primary_button %}

<h1 class="text-center
    {% if message.error %}
        text-red-500
    {% else %}
        text-green-500
    {% endif %}
    ">
    {{message.message}}
</h1>

{% if htmx and not message.error %}
        {% set button_id = "button-c-" + training_class.id|string %}
        {{ primary_button(
            text='Enrolled!',
            classes='w-full py-2 px-4 text-white rounded-lg bg-gray-300 cursor-not-allowed opacity-50',
            attrs={
                "disabled": "true",
                "hx-swap-oob": "true",
                "id": button_id
            }
        ) }}
{% else %}
        {% set message_id = "#message-c-" + training_class.id|string %}
        {% set button_id = "button-c-" + training_class.id|string %}

        {{ primary_button(
            text='Enroll Now',
            attrs={
                "id": button_id,
                "hx-get": url_for('client.enroll_class', class_id=training_class.id),
                "hx-target": message_id,
                "hx-trigger": "click",
                "hx-swap": "innerHTML"
            },
            classes='w-full py-2 px-4 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition cursor-pointer'
        ) }}
{% endif %}